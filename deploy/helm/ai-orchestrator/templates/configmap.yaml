apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "ai-orchestrator.fullname" . }}-config
  namespace: {{ include "ai-orchestrator.namespace" . }}
  labels:
    {{- include "ai-orchestrator.commonLabels" . | nindent 4 }}
data:
  MONGODB_HOST: "{{ include "ai-orchestrator.mongodb.fullname" . }}"
  MONGODB_PORT: "{{ .Values.service.mongodb.port }}"
  MONGODB_DATABASE: "{{ .Values.mongodb.auth.database }}"
  VICTORIAMETRICS_URL: "http://{{ include "ai-orchestrator.victoriametrics.fullname" . }}:{{ .Values.service.victoriametrics.port }}"
  SCHEDULER_ENABLED: "{{ .Values.controlPlane.scheduler.enabled }}"
  SCHEDULER_INTERVAL_SECONDS: "{{ .Values.controlPlane.scheduler.intervalSeconds }}"
  MAX_CONCURRENT_RUNS_PER_WORKER: "{{ .Values.controlPlane.concurrency.maxConcurrentRunsPerWorker }}"
  MAX_CONCURRENT_JOBS_TOTAL: "{{ .Values.controlPlane.concurrency.maxConcurrentJobsTotal }}"
  HARNESS_IMAGE_CODEX: "{{ .Values.harness.images.codex }}"
  HARNESS_IMAGE_OPENCODE: "{{ .Values.harness.images.opencode }}"
  HARNESS_IMAGE_CLAUDECODE: "{{ .Values.harness.images.claudecode }}"
  HARNESS_IMAGE_ZAI: "{{ .Values.harness.images.zai }}"
  HARNESS_IMAGE_ALLINONE: "{{ .Values.harness.images.allInOne }}"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "ai-orchestrator.control-plane.fullname" . }}-config
  namespace: {{ include "ai-orchestrator.namespace" . }}
  labels:
    {{- include "ai-orchestrator.control-plane.labels" . | nindent 4 }}
data:
  ASPNETCORE_ENVIRONMENT: "{{ .Values.controlPlane.env.ASPNETCORE_ENVIRONMENT }}"
  ASPNETCORE_URLS: "{{ .Values.controlPlane.env.ASPNETCORE_URLS }}"
  LOG_LEVEL: "{{ .Values.controlPlane.env.LogLevel }}"
  WORKER_GATEWAY_URL: "http://{{ include "ai-orchestrator.worker-gateway.fullname" . }}:{{ .Values.service.workerGateway.port }}"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "ai-orchestrator.worker-gateway.fullname" . }}-config
  namespace: {{ include "ai-orchestrator.namespace" . }}
  labels:
    {{- include "ai-orchestrator.worker-gateway.labels" . | nindent 4 }}
data:
  ASPNETCORE_ENVIRONMENT: "{{ .Values.workerGateway.env.ASPNETCORE_ENVIRONMENT }}"
  ASPNETCORE_URLS: "{{ .Values.workerGateway.env.ASPNETCORE_URLS }}"
  LOG_LEVEL: "{{ .Values.workerGateway.env.LogLevel }}"
  DOCKER_HOST: "{{ .Values.docker.host }}"
  ARTIFACT_STORAGE_PATH: "{{ .Values.workerGateway.artifactStorage.path }}"
  HEARTBEAT_INTERVAL_SECONDS: "{{ .Values.workerGateway.heartbeat.intervalSeconds }}"
  HEARTBEAT_TIMEOUT_SECONDS: "{{ .Values.workerGateway.heartbeat.timeoutSeconds }}"
  CONTROL_PLANE_URL: "http://{{ include "ai-orchestrator.control-plane.fullname" . }}:{{ .Values.service.controlPlane.port }}"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "ai-orchestrator.victoriametrics.fullname" . }}-config
  namespace: {{ include "ai-orchestrator.namespace" . }}
  labels:
    {{- include "ai-orchestrator.victoriametrics.labels" . | nindent 4 }}
data:
  retentionPeriod: "{{ .Values.victoriametrics.retentionPeriod }}"
  storageDataPath: "{{ .Values.victoriametrics.storageDataPath }}"
  maxLabelsPerTimeseries: "{{ .Values.victoriametrics.config.maxLabelsPerTimeseries }}"
  memory.allowedPercent: "{{ .Values.victoriametrics.config.memoryAllowedPercent }}"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "ai-orchestrator.vmui.fullname" . }}-config
  namespace: {{ include "ai-orchestrator.namespace" . }}
  labels:
    {{- include "ai-orchestrator.vmui.labels" . | nindent 4 }}
data:
  SERVER_NAME: "{{ .Values.vmui.server.name }}"
  VICTORIAMETRICS_URL: "http://{{ include "ai-orchestrator.victoriametrics.fullname" . }}:{{ .Values.service.victoriametrics.port }}"
